 ssh-list: run command via SSH on many hosts simultaneously – Open Computing Facility Toggle navigation Open Computing Facility Join About Us Our Organization Joining the Staff Team Lab Statistics Backend Infrastructure Services Computer Lab Printing Web Hosting Application Hosting SSH/SFTP (Shell) Email Hosting MySQL Database Software Mirrors High Performance Computing Staff Hours Help Contact Us Log In ssh-list: run command via SSH on many hosts simultaneously ssh-list is a small wrapper around parallel-ssh which reads lists of hosts from LDAP. The usage of ssh-list looks like: ssh-list <TYPE> [arguments to parallel-ssh] The argument <TYPE> is interpreted by ssh-list , and the arguments after are passed verbatim to parallel-ssh . In most cases, you want at least -i in the arguments to parallel-ssh. -i prints out the stdout and stderr for each host you are running the command on. For example: ssh-list all -i whoami In most cases, it's most useful to use a type like desktop rather than all . If you get a ton of authentication errors, don't provide your password, just do kinit $USER first (your Kerberos ticket probably expired, or you probably logged in with an SSH key). Some useful commands are below (please add more!): Run puppet once Anyone in ocfroot can call sudo puppet-trigger without providing a password. ssh-list desktop -i 'sudo puppet-trigger' Restart unused desktops Anyone in ocfroot can call sudo shutdown without providing a password. ssh-list desktop -i '[ $(who | wc -l) -eq 0 ] && sudo shutdown -r now' Run apt-get update to clear apt caches ocfroot can't run passwordless apt-get , so you need to use the apt-dater keytab. From supernova: sudo kinit -k -t /root/apt-dater.keytab 'apt-dater@OCF.BERKELEY.EDU' \ ssh-list desktop -l apt-dater -i 'sudo apt-get update' Edit this Page Page History More in this category Scripts approve: record an OCF group account request check: get details about an OCF user checkacct: find accounts by full name chpass: reset a user's password economode: turn economode on/off on the printers how: view the source of a script lab-wakeup: wake up suspended desktops migrate-vm: migrate VMs between hosts note: add notes to a user account ocf-tv: connect to the tv or modify the volume paper: view and modify print quotas pdf-open: unf*&^ bad PDFs if they won't print right signat: check signatory status sorry: disable an OCF account ssh-list: run command via SSH on many hosts simultaneously unsorry: re-enable a sorried account OCF ♥ Linux , Kubernetes , Python , Nix , and Free/Open-Source Software. Sound like you? Join the staff team! About the OCF Overview Officers Official Documents Board Meeting Minutes Privacy Policy Account Tools Join the OCF Reset Password Manage My Account Services Computer Lab & Printing Web Hosting Application Hosting Email Hosting SSH/Remote Shell High Performance Computing Help and Support Status Blog Donate to the OCF Frequently Asked Questions User Documentation Staff Documentation Contact Us The Open Computing Facility is run entirely by student volunteers. Copyright © 1989–2025 Board of Directors of the Open Computing Facility. The Open Computing Facility is a Chartered Program of the ASUC. 